== Configuration de Homebridge

=== Sélection des accessoires 

Vous devez sélectionner les équipements que vous souhaitez utiliser avec Homebridge.

*Configuration via les plugins*

image::../images/config-plugin.png[]

*Configuration via les pièces / objets*

image::../images/config-piece.png[]

Cliquez sur les plugins ou les pièces/objets où se trouvent les équipements que vous souhaitez ajouter.

image::../images/config-plugin-1.png[]

Pour sélectionner les équipements que vous voulez utiliser sur Homebridge, cochez la case "Envoyer à Homebridge".
[TIP]
Pour ajouter ou supprimer un accessoire dans Homebrige, sélectionnez l'accessoire en question dans Plugins ou Objet/pièces et cochez ou décochez "Envoyer à Homebridge". Retournez dans "Equipement" et cliquez sur sauvegarder. Il n'est pas nécessaire de modifier le nom ou le PIN Homebridge. Une fois sauvegardé (et le démon relancé), votre accessoire sera intégré ou supprimé de Homebridge.*

En cliquant sur l'équipement, vous verrez les types génériques utilisés pour la communication entre votre jeedom et Homebridge.

image::../images/typegen-1.png[]

La majorité des types génériques est déjà renseignée. Dans certains cas, vous devrez les configurer manuellement (pour le plugin Virtuel par exemple).

Voici les types génériques disponibles : 

Pour les informations : 

image::../images/typeginfo.png[]

Pour les actions : 

image::../images/ypegeaction.png[]

[IMPORTANT]
Chaque équipement doit disposer d'au moins un type générique de type "info". S'il n'y a pas d'info, l'équipement ne sera pas disponible sur Homebridge.
Il faut une certaine cohérence dans le choix des types génériques. Dans le cas d'une lumière par exemple, vous devez avoir l'info "Lumière état" et les actions "Lumières bouton OFF" et "Lumière bouton ON". Si cette cohérence n'est pas respectée, l'équipement peut ne pas apparaître dans Homebridge.

image::../images/ypegelumi.png[]

=== Types génériques compatibles avec Homebridge

include::configurationHomebridgeTypeGenerique.asciidoc[]

=== Configuration du plugin mobile

Une fois tous les objets configurés avec leurs bons types génériques, retournez dans *-> Equipement -> Configuration.*

image::../images/config-pluginhb.png[]

* *Utilisateur* : Permet à Homebridge d'utiliser l'ApiKey d'un utilisateur de votre Jeedom.

* *Nom Homebridge* : Permet de renommer votre pont Homebridge. 

[IMPORTANT]
Le changement de nom Homebridge vous obligera à reconfigurer vos applications Homekit.

* *PIN Homebridge* : Permet de personnaliser le code PIN Homebridge.

* *Réparer* :  Permet une réparation de Homebridge en modifiant les identifiants. 

[IMPORTANT]
Il faut retirer le bridge de votre application "Maison" avant et l'y remettre ensuite.

* *Réparer & réinstaller* : Supprime et réinstalle complètement Homebridge. 

[IMPORTANT]
Il faut retirer le bridge de votre application "Maison" avant et l'y remettre ensuite.

* *Plateforme Homebridge supplémentaire* : Permet de rajouter manuellement un équipement.

[IMPORTANT]
Réservé à un public averti. Il n'y aura aucun support pour cette partie.

Une fois les cases *Utilisateur, nom Homebridge et PIN Homebridge* correctement renseignées, finaliser la configuration en cliquant sur **sauvegarder**.


